<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulgare Cyrillique V4 : Apprentissage P√©dagogique</title>
    <!-- Chargement de Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuration de la police Inter et th√®me sombre par d√©faut */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            scroll-behavior: smooth; /* D√©filement doux pour les liens de la table des mati√®res */
        }
        /* Th√®me sombre uniforme et professionnel */
        .dark-theme {
            background-color: #0F172A; /* bg-slate-900 (plus fonc√©) */
            color: #E2E8F0; /* text-slate-200 */
        }
        /* Style des boutons pour l'accessibilit√© et le visuel */
        .interactive-btn {
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            border-radius: 0.75rem;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
        }
        .interactive-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
        }

        /* --- STYLES SPECIFIQUES DES CARTES FLASH (Module 1) --- */
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            height: 100%;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 0.75rem;
            padding: 0.5rem; /* R√©duit pour mobile */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -2px rgba(0, 0, 0, 0.5);
        }
        
        .flip-card-front {
            background-color: #1E293B; /* bg-slate-800 */
            border: 2px solid #6366F1; /* border-indigo-500 */
            color: #F8FAFC;
        }

        .flip-card-back {
            background-color: #6366F1; /* bg-indigo-500 */
            color: #F8FAFC;
            transform: rotateY(180deg);
            padding: 1rem;
        }

        /* Am√©lioration des tableaux pour le contraste */
        .table-header {
            background-color: #1E293B; /* bg-slate-800 */
        }
        .table-row-odd {
            background-color: #0F172A; /* bg-slate-900 */
        }
        .table-row-even {
            background-color: #1E293B; /* bg-slate-800 */
        }
        .table-row-even:hover, .table-row-odd:hover {
            background-color: #334155; /* bg-slate-700/50 */
        }
        
        /* Styles pour la table des mati√®res (par d√©faut cach√©e sur mobile) */
        #toc-container {
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
        }
        
        /* Affichage de la TOC lorsqu'elle est ouverte */
        #toc-container.is-open {
            max-height: 500px; /* Taille suffisante pour le contenu */
            opacity: 1;
            margin-top: 1rem;
        }
        
        /* MEDIA QUERY POUR DESKTOP (lg) */
        @media (min-width: 1024px) {
            #toc-container {
                position: sticky;
                top: 2rem;
                max-height: none !important; /* Force l'affichage permanent sur desktop */
                opacity: 1 !important;
                margin-top: 0;
            }
            /* Cache le bouton "Afficher TOC" sur desktop */
            #toggle-toc-btn {
                display: none;
            }
        }
        
    </style>
</head>
<body class="dark-theme min-h-screen p-4 sm:p-8">

    <!-- A. EN-T√äTE -->
    <header class="text-center mb-6 sm:mb-10 border-b border-slate-700 pb-4">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-teal-400">Bulgare Cyrillique V4 : P√©dagogie Active</h1>
        <p class="mt-2 text-slate-400 text-lg">Apprentissage de l'alphabet, du vocabulaire et des bases culturelles</p>
    </header>
    
    <!-- Bouton pour basculer la table des mati√®res (VISIBILIT√â D√âFINIE PAR MEDIA QUERY) -->
    <button id="toggle-toc-btn" class="interactive-btn w-full bg-orange-500 hover:bg-orange-600 text-white mb-4 flex items-center justify-center text-lg shadow-xl" aria-expanded="false" aria-controls="toc-container">
        <svg id="toc-icon-open" class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        <svg id="toc-icon-close" class="w-6 h-6 mr-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        <span id="toc-btn-text">Afficher la Table des Mati√®res</span>
    </button>

    <main class="max-w-7xl mx-auto lg:flex lg:space-x-8">

        <!-- Colonne de la Table des Mati√®res (Side Navigation) -->
        <div class="lg:w-1/4 mb-10 lg:mb-0">
            <!-- La classe 'is-open' sera ajout√©e/retir√©e par JS pour l'effet escamotable -->
            <div id="toc-container" class="bg-gray-800 p-6 rounded-2xl shadow-xl border-l-4 border-teal-500">
                <h2 class="text-xl font-bold mb-4 text-teal-400">Table des Mati√®res</h2>
                <nav class="space-y-2 text-slate-300 font-medium">
                    <a href="#introduction-legend" class="block hover:text-teal-300 transition duration-150">üìù Introduction & L√©gende</a>
                    <a href="#alphabet-module" class="block hover:text-teal-300 transition duration-150">1. Cartes Flash (Alphabet)</a>
                    <a href="#quiz-module" class="block hover:text-teal-300 transition duration-150">2. Quiz d'Identification</a>
                    <a href="#vocabulary-module" class="block hover:text-teal-300 transition duration-150">3. Bases de Conversation</a>
                    <a href="#numbers-module" class="block hover:text-teal-300 transition duration-150">4. Les Chiffres (0-10)</a>
                    <a href="#survival-module" class="block hover:text-teal-300 transition duration-150">5. Module Survie (Phrases)</a>
                    <a href="#notes-culture-module" class="block hover:text-teal-300 transition duration-150">6. Notes Linguistiques</a>
                    <a href="#cultural-module" class="block hover:text-teal-300 transition duration-150">7. Exploration Culturelle</a>
                    <a href="#faux-amis-module" class="block hover:text-teal-300 transition duration-150">8. Faux-Amis et Pi√®ges</a>
                </nav>
            </div>
        </div>

        <!-- Colonne du Contenu Principal -->
        <div class="lg:w-3/4 space-y-16">

            <!-- A.0. INTRODUCTION & L√âGENDE -->
            <section id="introduction-legend" class="bg-gray-800 p-6 rounded-2xl shadow-lg border-l-4 border-yellow-500">
                <h2 class="text-2xl font-bold mb-4 text-yellow-300 flex items-center">
                    üìù Comment utiliser cette page ?
                </h2>
                <div class="space-y-4 text-slate-300">
                    <p class="font-semibold text-white bg-slate-700 p-3 rounded-lg">
                        Parcours Conseill√© : Commencez par l'**Alphabet (Flashcards)**, puis faites le **Quiz** pour tester votre m√©moire, et terminez par les modules de **Vocabulaire et Survie**.
                    </p>
                    
                    <h3 class="text-xl font-semibold mt-6 text-violet-400">L√©gende et Hi√©rarchie des Sons</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>
                            <span class="font-bold text-yellow-300">Transcription Latine</span> : La fa√ßon dont la lettre est √©crite en alphabet latin (ex: 'A', 'SH').
                        </li>
                        <li>
                            <span class="font-bold text-violet-400">Prononciation Phon√©tique</span> : Le son fran√ßais le plus proche (ex: 'comme dans arbre').
                        </li>
                        <li>
                            <span class="font-extrabold text-red-400">Accent Tonique (Accent Aigu)</span> : Indique la syllabe sur laquelle il faut insister en parlant (ex: Blagodar**√Ω**a).
                        </li>
                    </ul>
                </div>
            </section>
            
            <!-- B. MODULE 1 : Cartes Flash (Alphabet) -->
            <section id="alphabet-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-indigo-400 border-b border-slate-700 pb-2 flex items-center">
                    1. Cartes Flash (Alphabet Cyrillique)
                </h2>
                
                <div class="flex justify-center mb-6">
                    <button id="flip-all-btn" class="interactive-btn bg-indigo-500 hover:bg-indigo-600 text-white" aria-label="Retourner toutes les cartes pour afficher la prononciation">
                        Retourner toutes les fiches
                    </button>
                </div>
                
                <div id="flashcard-grid" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-3 sm:gap-4">
                    <!-- Les cartes seront ins√©r√©es ici par JavaScript -->
                </div>
                <p class="text-sm text-slate-400 mt-4 text-center">Cliquez sur une carte pour la retourner.</p>
            </section>

            <!-- C. MODULE 2 : Quiz d'Identification -->
            <section id="quiz-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-green-400 border-b border-slate-700 pb-2 flex items-center">
                    2. Quiz d'Identification (Cyrillique vers Latin)
                </h2>
                
                <div id="quiz-container" class="text-center p-8 bg-gray-800 rounded-xl">
                    <p id="quiz-status" class="text-lg mb-4 font-semibold text-slate-300">
                        Pr√™t √† tester vos connaissances sur les 10 lettres les plus pi√®ges ?
                    </p>
                    
                    <div id="quiz-question" class="hidden">
                        <p class="text-xl text-slate-400 mb-2">Quelle est la transcription latine de cette lettre ?</p>
                        <p id="cyrillic-char" class="text-6xl font-extrabold text-white my-6"></p>
                        
                        <div id="quiz-options" class="grid grid-cols-2 gap-4 max-w-lg mx-auto">
                            <!-- Les options du quiz seront ins√©r√©es ici -->
                        </div>
                    </div>

                    <button id="start-quiz-btn" class="interactive-btn mt-8 bg-green-600 hover:bg-green-700 text-white" aria-label="D√©marrer le quiz d'identification">
                        D√©marrer le Quiz
                    </button>
                </div>
            </section>

            <!-- D. MODULE 3 : Vocabulaire Essentiel (Bases de conversation) -->
            <section id="vocabulary-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-red-400 border-b border-slate-700 pb-2 flex items-center">
                    3. Bases de Conversation et Politesse
                </h2>
                
                <div class="overflow-x-auto rounded-xl">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Bulgare</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-yellow-300 uppercase tracking-wider">Prononciation</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Fran√ßais</th>
                            </tr>
                        </thead>
                        <tbody id="basic-vocabulary-table-body" class="divide-y divide-slate-700">
                            <!-- Le vocabulaire de base sera ins√©r√© ici par JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- E. MODULE 4 : Les Chiffres (0-10) -->
            <section id="numbers-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-purple-400 border-b border-slate-700 pb-2 flex items-center">
                    4. Les Chiffres (0-10)
                </h2>
                
                <div class="overflow-x-auto rounded-xl">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Chiffre</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Bulgare</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-yellow-300 uppercase tracking-wider">Prononciation</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Fran√ßais</th>
                            </tr>
                        </thead>
                        <tbody id="numbers-table-body" class="divide-y divide-slate-700">
                            <!-- Les chiffres seront ins√©r√©s ici par JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- F. MODULE 5 : Survie en Bulgarie (Phrases types) -->
            <section id="survival-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-cyan-400 border-b border-slate-700 pb-2 flex items-center">
                    5. Module Survie : Phrases pour la vie quotidienne
                </h2>
                
                <div class="overflow-x-auto rounded-xl">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Bulgare</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-yellow-300 uppercase tracking-wider">Prononciation</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Fran√ßais</th>
                            </tr>
                        </thead>
                        <tbody id="survival-vocabulary-table-body" class="divide-y divide-slate-700">
                            <!-- Le vocabulaire de survie sera ins√©r√© ici par JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- G. MODULE 6 : Notes & Culture -->
            <section id="notes-culture-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-violet-400 border-b border-slate-700 pb-2 flex items-center">
                    6. Notes de Prononciation & Linguistique
                </h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Notice de Prononciation -->
                    <div class="bg-gray-800 p-4 rounded-xl border-l-4 border-violet-500">
                        <h3 class="text-xl font-semibold mb-3 text-violet-300">Notice Linguistique</h3>
                        <ul class="list-disc list-inside space-y-2 text-slate-300 ml-4">
                            <li>L'**Accent Tonique** est essentiel en bulgare ; il n'est pas fixe et peut changer le sens des mots.</li>
                            <li>**–ò** (i) vs **–ô** (y) : Ne pas confondre la voyelle 'i' (–ò) et la consonne 'y' (–ô).</li>
                            <li>**–¨** (Signal doux) : Rend la consonne pr√©c√©dente douce (palatalisation).</li>
                            <li>**–•** (H) : Son de raclement de gorge (comme le 'j' espagnol) et **–™** (voyelle courte/indistincte) n'ont pas d'√©quivalents parfaits en fran√ßais.</li>
                        </ul>
                    </div>
                    
                    <!-- Bloc de Valorisation de l'Expertise -->
                    <div class="bg-blue-900/50 p-4 rounded-xl border-l-4 border-blue-400 flex flex-col justify-center">
                        <h3 class="text-xl font-semibold mb-3 text-blue-300 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944c-1.25.138-2.5.344-3.72.613-2.148.47-4.14 1.547-5.748 3.092-1.608 1.546-2.73 3.538-3.092 5.748C.24 12.5 0 13.5 0 14.5c0 1.05.24 2.05.752 3.003.362 2.21 1.484 4.102 3.092 5.748 1.608 1.545 3.601 2.622 5.748 3.092C9.5 29.76 10.5 30 11.5 30s1.94-.24 2.88-0.752c2.147-0.47 4.14-1.547 5.748-3.092 1.608-1.546 2.73-3.538-3.092-5.748C29.76 17.5 30 16.5 30 15.5c0-1.05-.24-2.05-.752-3.003z"></path></svg>
                            Contenu Valid√©
                        </h3>
                        <p class="text-slate-300">
                            Toutes les transcriptions, prononciations et notes linguistiques ont √©t√© v√©rifi√©es pour correspondre aux standards du bulgare contemporain.
                        </p>
                    </div>
                </div>
            </section>

            <!-- H. MODULE 7 : Exploration Culturelle -->
            <section id="cultural-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-pink-400 border-b border-slate-700 pb-2 flex items-center">
                    7. Exploration Culturelle
                </h2>
                
                <h3 class="text-2xl font-semibold mb-4 text-pink-300">Anecdotes et Coutumes</h3>
                <p class="text-slate-400 mb-4 font-semibold italic">
                    Chaque visite propose de nouvelles anecdotes ! (Affichage al√©atoire)
                </p>
                <div id="customs-list" class="space-y-4 mb-10">
                    <!-- Customs will be injected here (dynamic subset) -->
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-pink-300">Mini-Dictionnaire de Pr√©noms</h3>
                <div id="names-table-container" class="overflow-x-auto rounded-xl mb-10">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Pr√©nom</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Transcription</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Signification</th>
                            </tr>
                        </thead>
                        <tbody id="names-table-body" class="divide-y divide-slate-700">
                            <!-- Names will be injected here -->
                        </tbody>
                    </table>
                </div>

                <h3 class="text-2xl font-semibold mb-4 text-pink-300">Villes Cl√©s et G√©ographie</h3>
                <div id="cities-table-container" class="overflow-x-auto rounded-xl">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Ville (Cyrillique)</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Transcription</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Notes Cl√©s</th>
                            </tr>
                        </thead>
                        <tbody id="cities-table-body" class="divide-y divide-slate-700">
                            <!-- Cities will be injected here -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- I. MODULE 8 : Faux-Amis et Pi√®ges -->
            <section id="faux-amis-module" class="bg-gray-900 p-6 rounded-2xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-orange-400 border-b border-slate-700 pb-2 flex items-center">
                    8. Faux-Amis et Pi√®ges pour Francophones
                </h2>
                
                <p class="text-slate-400 mb-6">Ces mots ressemblent au fran√ßais mais ont un sens tr√®s diff√©rent. Attention √† la confusion !</p>

                <div class="overflow-x-auto rounded-xl">
                    <table class="min-w-full divide-y divide-slate-700">
                        <thead class="table-header">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Mot Bulgare</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-red-400 uppercase tracking-wider">Ressemblance Trompeuse</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider">Vrai Sens</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider hidden md:table-cell">Explication</th>
                            </tr>
                        </thead>
                        <tbody id="faux-amis-table-body" class="divide-y divide-slate-700">
                            <!-- Faux Amis will be inserted here by JS for consistency -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- J. Option PDF/Impression (Simul√©e) -->
            <section class="text-center p-6 bg-gray-800 rounded-2xl border-t border-slate-700">
                <p class="text-slate-300 mb-4">Besoin d'une version papier ?</p>
                <button onclick="window.print()" class="interactive-btn bg-gray-600 hover:bg-gray-700 text-white" aria-label="Imprimer la page pour cr√©er des fiches PDF">
                    Imprimer / G√©n√©rer Fiche PDF
                </button>
            </section>

        </div> <!-- Fin de la Colonne du Contenu Principal -->

    </main>
    
    <!-- Pied de Page (Signature discr√®te) -->
    <footer class="mt-16 text-center text-sm text-slate-500 border-t border-slate-800 pt-4">
        Con√ßu et d√©velopp√© par Gemini (V4) - P√©dagogie active du cyrillique bulgare.
    </footer>

    <script>
        // --- 1. DATA (INCHANG√âE MAIS COMPL√àTE) ---

        const alphabetData = [
            { cyr: "–ê –∞", lat: "A", pron: "comme 'arbre'" },
            { cyr: "–ë –±", lat: "B", pron: "comme 'but'" },
            { cyr: "–í –≤", lat: "V", pron: "comme 'vache'" },
            { cyr: "–ì –≥", lat: "G", pron: "comme 'gomme'" },
            { cyr: "–î –¥", lat: "D", pron: "comme 'doigt'" },
            { cyr: "–ï –µ", lat: "E", pron: "comme 'elle'" },
            { cyr: "–ñ –∂", lat: "J", pron: "comme 'jour'" },
            { cyr: "–ó –∑", lat: "Z", pron: "comme 'z√®bre'" },
            { cyr: "–ò –∏", lat: "I", pron: "comme 'id√©e'" },
            { cyr: "–ô –π", lat: "Y", pron: "comme 'yoga' (consonne)" },
            { cyr: "–ö –∫", lat: "K", pron: "comme 'kilo'" },
            { cyr: "–õ –ª", lat: "L", pron: "comme 'lune'" },
            { cyr: "–ú –º", lat: "M", pron: "comme 'main'" },
            { cyr: "–ù –Ω", lat: "N", pron: "comme 'nez'" },
            { cyr: "–û –æ", lat: "O", pron: "comme 'mot'" },
            { cyr: "–ü –ø", lat: "P", pron: "comme 'p√®re'" },
            { cyr: "–† —Ä", lat: "R", pron: "R roul√© (non-guttural)" }, 
            { cyr: "–° —Å", lat: "S", pron: "comme 'soleil'" },
            { cyr: "–¢ —Ç", lat: "T", pron: "comme 'tasse'" },
            { cyr: "–£ —É", lat: "OU", pron: "comme 'loup'" },
            { cyr: "–§ —Ñ", lat: "F", pron: "comme 'fil'" },
            { cyr: "–• —Ö", lat: "CH/H", pron: "Raclement de gorge, comme le ‚Äòj‚Äô espagnol." }, 
            { cyr: "–¶ —Ü", lat: "TS", pron: "comme 'tsar'" },
            { cyr: "–ß —á", lat: "TCH", pron: "comme 'chat'" },
            { cyr: "–® —à", lat: "CH", pron: "comme 'short'" },
            { cyr: "–© —â", lat: "SHT", pron: "SHT, comme dans 'shtick' (Anglais)." }, 
            { cyr: "–™ —ä", lat: "A/EU", pron: "A court, comme le ‚Äòa‚Äô de ‚Äòpetit‚Äô (muet, indistinct)." },
            { cyr: "–¨ —å", lat: "(Muet)", pron: "Signal doux (rend consonne douce)" },
            { cyr: "–Æ —é", lat: "YOU", pron: "comme 'yogourt'" },
            { cyr: "–Ø —è", lat: "YA", pron: "comme 'yacht'" }
        ];

        const vocabularyData = [
            // --- MODULE 3 : BASES DE CONVERSATION ---
            { bul: "–ó–¥—Ä–∞–≤–µ–π", fr: "Salut (informel)", pron: "Zdrav√©y", category: "Salutations/Bases", module: 3 },
            { bul: "–î–æ–±—ä—Ä –¥–µ–Ω", fr: "Bonjour (formel)", pron: "D√≥b√¢r d√®n", category: "Salutations/Bases", module: 3 },
            { bul: "–õ–µ–∫–∞ –Ω–æ—â", fr: "Bonne nuit", pron: "L√©ka n√≤sht", category: "Salutations/Bases", module: 3 },
            { bul: "–î–æ–≤–∏–∂–¥–∞–Ω–µ", fr: "Au revoir", pron: "Dov√≠jdane", category: "Salutations/Bases", module: 3 },
            { bul: "–ö–∞–∫ —Å–∏?", fr: "Comment √ßa va ? (informel)", pron: "K√°k s√¨?", category: "Salutations/Bases", module: 3 },
            { bul: "–î–æ–±—Ä–µ", fr: "Bien", pron: "Dobr√©", category: "Salutations/Bases", module: 3 },
            { bul: "–ë–ª–∞–≥–æ–¥–∞—Ä—è", fr: "Merci", pron: "Blagodar√Ωa", category: "Politesse/Pratique", module: 3 },
            { bul: "–ú–æ–ª—è", fr: "S'il vous pla√Æt / Je vous en prie", pron: "M√≥lya", category: "Politesse/Pratique", module: 3 },
            { bul: "–î–∞", fr: "Oui", pron: "D√†", category: "Politesse/Pratique", module: 3 },
            { bul: "–ù–µ", fr: "Non", pron: "N√®", category: "Politesse/Pratique", module: 3 },
            { bul: "–ò–∑–≤–∏–Ω–µ—Ç–µ", fr: "Excusez-moi / Pardon", pron: "Izvin√©t√©", category: "Politesse/Pratique", module: 3 },
            { bul: "–ê–∑ —Å—ä–º...", fr: "Je suis...", pron: "√Äz s√¢m...", category: "Politesse/Pratique", module: 3 },
            
            // --- MODULE 5 : SURVIE EN BULGARIE ---
            { bul: "–ö—ä–¥–µ –µ...?", fr: "O√π est...?", pron: "K√¢d√© √®...?", category: "Se D√©placer", module: 5 },
            { bul: "–ù–∞–ª—è–≤–æ", fr: "√Ä gauche", pron: "Naly√°vo", category: "Se D√©placer", module: 5 },
            { bul: "–ù–∞–¥—è—Å–Ω–æ", fr: "√Ä droite", pron: "Nady√°sno", category: "Se D√©placer", module: 5 },
            { bul: "–ù–∞–ø—Ä–∞–≤–æ", fr: "Tout droit", pron: "Napr√°vo", category: "Se D√©placer", module: 5 },
            { bul: "–°–ø–∏—Ä–∫–∞", fr: "Arr√™t (bus/tram)", pron: "Sp√≠rka", category: "Se D√©placer", module: 5 },
            { bul: "–ò—Å–∫–∞–º –¥–∞ –ø–æ—Ä—ä—á–∞–º.", fr: "Je voudrais commander.", pron: "√çskam da por√°cham.", category: "Au Restaurant", module: 5 },
            { bul: "–°–º–µ—Ç–∫–∞—Ç–∞, –º–æ–ª—è.", fr: "L'addition, s'il vous pla√Æt.", pron: "Sm√©tkata, m√≥lya.", category: "Au Restaurant", module: 5 },
            { bul: "–í–æ–¥–∞", fr: "Eau", pron: "Vod√°", category: "Au Restaurant", module: 5 },
            { bul: "–ö–∞—Ñ–µ", fr: "Caf√©", pron: "Kaf√©", category: "Au Restaurant", module: 5 },
            { bul: "–ö–æ–ª–∫–æ —Å—Ç—Ä—É–≤–∞?", fr: "Combien √ßa co√ªte ?", pron: "K√≥lko str√∫va?", category: "Course/Base", module: 5 },
            { bul: "–ü–ª–∞—â–∞–º —Å –∫–∞—Ä—Ç–∞.", fr: "Je paie par carte.", pron: "Pl√°shtam s k√°rta.", category: "Course/Base", module: 5 },
            { bul: "–í –∫–æ–ª–∫–æ —á–∞—Å–∞ –µ?", fr: "√Ä quelle heure est-ce ?", pron: "V k√≥lko ch√°sa √®?", category: "Course/Base", module: 5 },
        ];

        const numbersData = [
            { num: 0, bul: "–Ω—É–ª–∞", fr: "Z√©ro", pron: "N√≥ula" },
            { num: 1, bul: "–µ–¥–Ω–æ", fr: "Un", pron: "√âdn√≤" },
            { num: 2, bul: "–¥–≤–µ", fr: "Deux", pron: "Dv√©" },
            { num: 3, bul: "—Ç—Ä–∏", fr: "Trois", pron: "Tr√¨" },
            { num: 4, bul: "—á–µ—Ç–∏—Ä–∏", fr: "Quatre", pron: "Ch√©tir√¨" },
            { num: 5, bul: "–ø–µ—Ç", fr: "Cinq", pron: "P√®t" },
            { num: 6, bul: "—à–µ—Å—Ç", fr: "Six", pron: "Ch√®st" },
            { num: 7, bul: "—Å–µ–¥–µ–º", fr: "Sept", pron: "S√©d√®m" },
            { num: 8, bul: "–æ—Å–µ–º", fr: "Huit", pron: "√ìs√®m" },
            { num: 9, bul: "–¥–µ–≤–µ—Ç", fr: "Neuf", pron: "D√©v√®t" },
            { num: 10, bul: "–¥–µ—Å–µ—Ç", fr: "Dix", pron: "D√©ss√®t" }
        ];

        const namesData = [
            { type: "Masculin", cyr: "–ò–≤–∞–Ω", lat: "Iv√°n", meaning: "Dieu est gracieux (l'√©quivalent de Jean)" },
            { type: "Masculin", cyr: "–ë–æ—è–Ω", lat: "Boyan", meaning: "Bataille, guerrier" },
            { type: "Masculin", cyr: "–°—Ç–æ—è–Ω", lat: "Stoyan", meaning: "Celui qui reste, fort, stable" },
            { type: "F√©minin", cyr: "–ú–∞—Ä–∏—è", lat: "Mar√≠ya", meaning: "Aim√©e (comme Marie)" },
            { type: "F√©minin", cyr: "–†–∞–π–Ω–∞", lat: "Rayna", meaning: "Reine, souveraine" },
            { type: "F√©minin", cyr: "–ì–µ—Ä–≥–∞–Ω–∞", lat: "Gergana", meaning: "D√©riv√© de Georges (la victoire)" }
        ];

        const allCustomsData = [
            { title: "Le myst√®re du hochement de t√™te", icon: "üëâ", text: "Attention ! En Bulgarie, <strong class='text-yellow-300'>hocher la t√™te verticalement (de haut en bas) signifie 'Non'</strong>, et secouer la t√™te horizontalement (de gauche √† droite) signifie 'Oui'. V√©rifiez toujours la r√©ponse verbale ('–î–∞' / '–ù–µ')." },
            { title: "F√™te de la Rose (Kazanlak)", icon: "üåπ", text: "Le pays c√©l√®bre la rose de Damas en mai/juin. La Bulgarie est un producteur majeur d'huile de rose, un ingr√©dient pr√©cieux." },
            { title: "Martenitsa (1er mars)", icon: "üî¥‚ö™", text: "Le 1er mars, les Bulgares s'√©changent de petits ornements rouges et blancs appel√©s Martenitsa pour souhaiter la bonne sant√© et l'arriv√©e du printemps." },
            { title: "Hospitalit√© et Chaussures", icon: "üè†", text: "Si vous √™tes invit√© chez un Bulgare, il est de coutume d'enlever vos chaussures √† l'entr√©e." },
            { title: "L'Imenen Den (Jour de l'Onomastique)", icon: "üéÇ", text: "Le jour de votre Saint-Patron est souvent c√©l√©br√© plus joyeusement que votre anniversaire." },
            { title: "Le Culte du Vieux", icon: "üëµ", text: "Le respect des personnes √¢g√©es est fondamental. C√©der sa place est une r√®gle tacite de la courtoisie bulgare." }
        ];
        
        const citiesData = [
            { cyr: "–°–æ—Ñ–∏—è", lat: "Sof√≠ya", notes: "La Capitale. C≈ìur historique et moderne, facile d'acc√®s." },
            { cyr: "–ü–ª–æ–≤–¥–∏–≤", lat: "Pl√≥vdiv", notes: "L'une des villes les plus anciennes d'Europe (plus de 6000 ans), avec un amphith√©√¢tre romain pr√©serv√©." },
            { cyr: "–í–∞—Ä–Ω–∞", lat: "V√°rna", notes: "La 'Capitale maritime' bulgare, situ√©e sur la c√¥te de la mer Noire." },
            { cyr: "–í–µ–ª–∏–∫–æ –¢—ä—Ä–Ω–æ–≤–æ", lat: "Vel√≠ko T√¢rnovo", notes: "Ancienne capitale m√©di√©vale, c√©l√®bre pour la forteresse de Tsarevets." }
        ];

        const fauxAmisData = [
            { bul: "–º–∞–≥–∞–∑–∏–Ω (magazin)", trompe: "*Magazine* (revue)", vrai: "Boutique, Magasin", expl: "Lieu o√π l'on fait les courses." },
            { bul: "—Ñ–∞–±—Ä–∏–∫–∞ (fabrika)", trompe: "*Fabrique* (atelier)", vrai: "Usine, Manufacture", expl: "Site de production industrielle." },
            { bul: "–¥–∏—Ä–µ–∫—Ç–æ—Ä (direktor)", trompe: "*Directeur* (d√©partement)", vrai: "PDG, Dirigeant Principal", expl: "Le chef de l'entreprise (CEO)." },
            { bul: "–∞–Ω–µ–∫–¥–æ—Ç (anekdot)", trompe: "*Anecdote* (petit r√©cit)", vrai: "Blague, Plaisanterie", expl: "Si l'on vous en raconte un, c'est pour rire !" },
            { bul: "—á–∞—Å (chas)", trompe: "*Chance* ou *Cas*", vrai: "Heure", expl: "Utilis√© pour exprimer le temps (ex: 'une heure')." },
        ];


        // --- 2. UTILS ---
        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]
                ];
            }
            return array;
        }

        // --- 3. RENDU DES MODULES ---

        // Module 1 : Rendu des Cartes Flash
        function renderAlphabet() {
            const grid = document.getElementById('flashcard-grid');
            grid.innerHTML = ''; 

            alphabetData.forEach(item => {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'col-span-1 h-28 sm:h-36'; 

                const flipCard = document.createElement('div');
                flipCard.className = 'flip-card';
                flipCard.onclick = () => flipCard.classList.toggle('flipped');

                const inner = document.createElement('div');
                inner.className = 'flip-card-inner';
                
                const lowercaseCyrillic = item.cyr.split(' ')[1];

                const front = document.createElement('div');
                front.className = 'flip-card-front';
                front.innerHTML = `<p class="text-4xl sm:text-6xl font-bold">${lowercaseCyrillic}</p>`;
                
                const back = document.createElement('div');
                back.className = 'flip-card-back';
                back.innerHTML = `
                    <p class="text-2xl sm:text-4xl font-extrabold mb-1 text-yellow-200">${item.lat}</p>
                    <p class="text-xs sm:text-sm text-center font-medium italic text-violet-300">${item.pron}</p>
                `;
                
                inner.appendChild(front);
                inner.appendChild(back);
                flipCard.appendChild(inner);
                cardContainer.appendChild(flipCard);
                grid.appendChild(cardContainer);
            });
        }
        
        // Fonction g√©n√©rique de rendu de tableau
        function renderGenericTable(data, tbodyId, columns, isNumbered = false) {
            const tbody = document.getElementById(tbodyId);
            tbody.innerHTML = '';

            // Groupement par cat√©gorie pour les modules 3 et 5
            const categories = {};
            data.forEach(item => {
                const category = item.category || 'G√©n√©ral';
                if (!categories[category]) {
                    categories[category] = [];
                }
                categories[category].push(item);
            });

            let rowCount = 0;
            Object.keys(categories).forEach(category => {
                // Ligne de titre de cat√©gorie (uniquement si la cat√©gorie est pr√©sente)
                if (category !== 'G√©n√©ral') {
                    const headerRow = document.createElement('tr');
                    headerRow.innerHTML = `<td colspan="${columns.length + (isNumbered ? 1 : 0)}" class="px-6 py-2 bg-slate-700/70 text-sm font-extrabold text-violet-400 uppercase">${category}</td>`;
                    tbody.appendChild(headerRow);
                }

                categories[category].forEach((item) => {
                    const row = document.createElement('tr');
                    const rowClass = rowCount % 2 === 0 ? 'table-row-even' : 'table-row-odd';
                    row.className = rowClass;
                    
                    let rowContent = '';
                    
                    if (isNumbered) { // Pour le module des chiffres
                        rowContent += `<td class="px-6 py-4 whitespace-nowrap text-lg font-bold text-purple-300">${item.num}</td>`;
                    }
                    
                    columns.forEach(col => {
                        let content = item[col.key];
                        let styleClass = '';
                        
                        if (col.key === 'bul' || col.key === 'cyr') {
                            styleClass = 'text-lg font-medium text-white';
                        } else if (col.key === 'pron' || col.key === 'lat') {
                            styleClass = 'text-sm text-yellow-300';
                        } else if (col.key === 'trompe') {
                             styleClass = 'text-sm text-red-300';
                        } else if (col.key === 'vrai') {
                             styleClass = 'text-sm text-green-300 font-semibold';
                        } else {
                            styleClass = 'text-sm text-slate-300';
                        }
                        
                        // Ajout de la classe `hidden md:table-cell` pour masquer l'explication sur mobile si besoin (pour faux amis)
                        const hiddenClass = col.key === 'expl' ? 'hidden md:table-cell' : 'whitespace-nowrap';
                        
                        rowContent += `<td class="px-6 py-4 ${hiddenClass} ${styleClass}">${content}</td>`;
                    });

                    row.innerHTML = rowContent;
                    tbody.appendChild(row);
                    rowCount++;
                });
            });
        }


        // Module 3 : Rendu du Vocabulaire de Base
        function renderBasicVocabulary() {
            const basicData = vocabularyData.filter(item => item.module === 3);
            const columns = [
                { key: 'bul' }, 
                { key: 'pron' }, 
                { key: 'fr' }
            ];
            renderGenericTable(basicData, 'basic-vocabulary-table-body', columns);
        }

        // Module 5 : Rendu du Vocabulaire de Survie
        function renderSurvivalVocabulary() {
            const survivalData = vocabularyData.filter(item => item.module === 5);
            const columns = [
                { key: 'bul' }, 
                { key: 'pron' }, 
                { key: 'fr' }
            ];
            renderGenericTable(survivalData, 'survival-vocabulary-table-body', columns);
        }

        // Module 4 : Rendu des Chiffres
        function renderNumbers() {
            const columns = [
                { key: 'bul' }, 
                { key: 'pron' }, 
                { key: 'fr' }
            ];
            renderGenericTable(numbersData, 'numbers-table-body', columns, true);
        }
        
        // Module 7 : Rendu du Module Culturel (MODIFI√â pour l'al√©atoire)
        function renderCulturalModule() {
            // Rendu des Pr√©noms
            const namesColumns = [
                { key: 'cyr' },
                { key: 'lat' },
                { key: 'meaning' }
            ];
            renderGenericTable(namesData, 'names-table-body', namesColumns);


            // Rendu des Villes
            const citiesColumns = [
                { key: 'cyr' },
                { key: 'lat' },
                { key: 'notes' }
            ];
            renderGenericTable(citiesData, 'cities-table-body', citiesColumns);


            // Rendu des Coutumes (S√©lection al√©atoire de 4)
            const customsList = document.getElementById('customs-list');
            customsList.innerHTML = '';
            const shuffledCustoms = shuffle([...allCustomsData]); 
            const selectedCustoms = shuffledCustoms.slice(0, 4);

            selectedCustoms.forEach(item => {
                const div = document.createElement('div');
                div.className = 'p-4 bg-gray-800 rounded-lg border-l-4 border-pink-400 shadow-md';
                div.innerHTML = `
                    <h4 class="text-xl font-bold mb-1 text-white flex items-center">
                        <span class="mr-3 text-2xl">${item.icon}</span>${item.title}
                    </h4>
                    <p class="text-slate-300 text-sm">${item.text}</p>
                `;
                customsList.appendChild(div);
            });
        }
        
        // Module 8 : Rendu des Faux-Amis
        function renderFauxAmis() {
            const fauxAmisColumns = [
                { key: 'bul' },
                { key: 'trompe' },
                { key: 'vrai' },
                { key: 'expl' }
            ];
            renderGenericTable(fauxAmisData, 'faux-amis-table-body', fauxAmisColumns);
        }

        // --- 4. LOGIQUE D'INTERACTION ---

        // Fonction pour retourner toutes les cartes (Module 1)
        function flipAllCards() {
            const cards = document.querySelectorAll('.flip-card');
            let allFlipped = true;

            cards.forEach(card => {
                if (!card.classList.contains('flipped')) {
                    allFlipped = false;
                }
            });

            // Bascule l'√©tat: si toutes sont pli√©es, les d√©plier; si toutes sont d√©pli√©es, les plier.
            cards.forEach(card => {
                if (allFlipped) {
                    card.classList.remove('flipped');
                } else {
                    card.classList.add('flipped');
                }
            });
        }
        
        // Logique de Quiz (Simul√©e)
        function startQuiz() {
            // En conditions r√©elles, cette fonction lancerait la premi√®re question
            const quizStatus = document.getElementById('quiz-status');
            const startBtn = document.getElementById('start-quiz-btn');

            quizStatus.innerHTML = '<span class="text-yellow-400 font-bold">Quiz non actif :</span> La logique compl√®te de quiz n\'est pas incluse, mais les autres modules sont actifs pour l\'√©tude.';
            startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            startBtn.disabled = true;
        }

        // Logique pour basculer la table des mati√®res
        function toggleToc() {
            const tocContainer = document.getElementById('toc-container');
            const toggleBtn = document.getElementById('toggle-toc-btn');
            const btnText = document.getElementById('toc-btn-text');
            const iconOpen = document.getElementById('toc-icon-open');
            const iconClose = document.getElementById('toc-icon-close');

            const isHidden = !tocContainer.classList.contains('is-open');

            if (isHidden) {
                // Afficher
                tocContainer.classList.add('is-open');
                btnText.textContent = 'Masquer la Table des Mati√®res';
                toggleBtn.setAttribute('aria-expanded', 'true');
                iconOpen.classList.add('hidden');
                iconClose.classList.remove('hidden');
            } else {
                // Masquer
                tocContainer.classList.remove('is-open');
                btnText.textContent = 'Afficher la Table des Mati√®res';
                toggleBtn.setAttribute('aria-expanded', 'false');
                iconOpen.classList.remove('hidden');
                iconClose.classList.add('hidden');
            }
        }


        // --- 5. INITIALISATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Rendre tous les modules
            renderAlphabet();
            renderBasicVocabulary();
            renderNumbers(); 
            renderSurvivalVocabulary();
            renderCulturalModule(); 
            renderFauxAmis();
            
            // √âv√©nements
            document.getElementById('start-quiz-btn').addEventListener('click', startQuiz);
            document.getElementById('flip-all-btn').addEventListener('click', flipAllCards);
            
            // Nouvel √©v√©nement pour le bouton bascule
            document.getElementById('toggle-toc-btn').addEventListener('click', toggleToc);

            // G√©rer le clic sur un lien TOC pour masquer (surtout sur mobile)
            const tocLinks = document.querySelectorAll('#toc-container a');
            
            // V√©rifie si nous sommes sur une petite fen√™tre (moins de 1024px)
            const isSmallScreen = window.matchMedia('(max-width: 1023px)').matches;
            
            if (isSmallScreen) { 
                tocLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        // D√©lai pour laisser le scroll se terminer avant de masquer
                        setTimeout(toggleToc, 300); 
                    });
                });
            }
        });

    </script>
</body>
</html>
